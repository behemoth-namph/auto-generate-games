{"ui": {"meta": {"game_name": "string", "game_type": "puzzle", "default_mode": "classic", "core_mechanic": "Solve Sudoku puzzles by filling 9x9 grid so each row, column, and 3x3 box contains digits 1-9 exactly once", "available_modes": [{"mode": "classic", "name": "Classic Sudoku", "config": {"move_limit": null, "time_limit": null, "undo_allowed": true, "hints_available": 3}, "players": {"ai": 0, "human": 1}, "description": "Solve Sudoku at your own pace", "player_mode": "single_player"}], "session_minutes": [5, 30], "supports_multiple_modes": false}, "feedback": ["Highlight selected cell", "Animate digit entry (fade/slide)", "Show invalid move feedback (red shake)", "Victory animation (celebration glow)", "Hint visualization (subtle glow on suggested cell)", "Move counter update"], "game_flow": {"screens": [{"type": "required", "screen": "mode_selection", "priority": 1, "description": "First screen - user selects game mode before playing", "interactions": ["Click mode card to select mode", "Selected mode is highlighted with selected style", "Click Start button to begin game with selected mode"], "skip_allowed": false, "display_elements": ["Game title/logo", "Mode selection cards/buttons (one per available_mode)", "Mode icon for each mode", "Mode name for each mode", "Mode description for each mode", "Player count indicator", "Config preview (time limits, difficulty, etc)", "Start/Play button (disabled until mode selected)"]}, {"type": "required", "screen": "gameplay", "priority": 2, "description": "Main game screen where actual gameplay occurs", "display_elements": ["Puzzle grid area (9x9 grid with bold 3x3 boxes)", "Current mode indicator badge", "Change Mode button", "Hints remaining indicator", "Undo button", "Redo button", "Timer (if timed mode)", "Live validation status indicator", "Status banner (valid/invalid/solved)"]}, {"type": "required", "screen": "game_over", "priority": 3, "description": "End screen showing results", "display_elements": ["Result message (win/lose/draw)", "Final score/stats", "Play Again button (restarts with same mode)", "Change Mode button (returns to mode_selection)"]}]}, "interactions": ["Click to select a cell", "Click a digit to begin entry", "Type a digit (1-9) to place into selected cell", "Click a digit again to overwrite (if allowed by mode)", "Use Undo/Redo to navigate history", "Click Hint to reveal a single suggested cell", "Swipe/tap for mobile: tap-diddle (tap-tap for digit entry)"], "visual_style": {"background": "#f6f7f9", "grid_color": "#2c2c2c", "piece_colors": {"digits": {"pencil": "#9e9e9e", "default": "#1e88e5"}}, "highlight_color": "#ffd54f"}, "mode_switcher": {"position": "top-right", "required": true, "button_text": "Change Mode", "description": "Button to change mode during gameplay", "confirmation_modal": {"title": "Change Game Mode?", "buttons": [{"text": "Cancel", "style": "secondary", "action": "close_modal"}, {"text": "Change Mode", "style": "warning", "action": "return_to_mode_selection_and_reset_game"}], "message": "Your current game progress will be lost. Are you sure you want to continue?", "required": true}}, "mode_indicator": {"display": {"icon": "from available_modes[].icon (optional)", "style": {"color": "#ffffff", "padding": "8px 12px", "font_size": 12, "background": "#37474f", "font_weight": "bold", "border_radius": 4}, "format": "Mode: {{mode_name}}"}, "position": "top-right", "required": true, "description": "Shows current active mode during gameplay"}, "mode_selection": {"layout": {"gap": 20, "type": "grid", "align": "center", "columns": "auto-fit", "responsive": true}, "required": true, "description": "Mode selection screen shown FIRST before any gameplay", "interactions": ["Click mode card to select", "Only one mode can be selected at a time", "Start button becomes enabled after selection", "Click Start to transition to gameplay"], "skip_allowed": false, "mode_card_style": {"hover": {"border": "2px solid #4CAF50", "cursor": "pointer", "box_shadow": "0 4px 8px rgba(0,0,0,0.15)"}, "width": 320, "height": 180, "padding": 18, "selected": {"scale": 1.04, "border": "3px solid #45a049", "background": "#c8e6c9", "box_shadow": "0 4px 8px rgba(76, 175, 80, 0.3)"}, "unselected": {"scale": 1.0, "border": "1px solid #ddd", "background": "#ffffff", "box_shadow": "0 2px 4px rgba(0,0,0,0.1)"}, "border_radius": 8}, "display_elements": ["Game title", "Mode cards/buttons (dynamically generated from available_modes array)", "For each mode: icon, name, description, player count, config preview", "Start button (disabled until mode selected)", "Settings button (optional)"]}, "display_elements": ["Change Mode button (during gameplay)", "Current mode indicator (during gameplay)", "Mode selection screen (REQUIRED - shown first before gameplay)", "Puzzle grid", "Move counter", "Timer (if timed mode)", "Hints remaining indicator", "Undo button", "Hint button", "Reset button", "Pause button", "Victory message"]}, "meta": {"game_name": "string", "game_type": "puzzle", "default_mode": "classic", "core_mechanic": "Solve Sudoku puzzles by filling 9x9 grid so each row, column, and 3x3 box contains digits 1-9 exactly once", "available_modes": [{"mode": "classic", "name": "Classic Sudoku", "config": {"move_limit": null, "time_limit": null, "undo_allowed": true, "hints_available": 3}, "players": {"ai": 0, "human": 1}, "description": "Solve Sudoku at your own pace", "player_mode": "single_player"}], "session_minutes": [5, 30], "supports_multiple_modes": false}, "rules": [{"id": "R1", "text": "Move MUST be validated before being applied to board.", "type": "core"}, {"id": "R2", "text": "Move counter MUST increment after each valid move.", "type": "core"}, {"id": "R3", "text": "Puzzle MUST be solvable from initial state.", "type": "core"}, {"id": "R4", "text": "Win condition MUST be checked after each move.", "type": "core"}, {"id": "R5", "text": "Undo SHOULD restore exact previous state.", "type": "validation"}, {"id": "R6", "text": "Hints SHOULD be helpful without giving complete solution.", "type": "optional"}], "state": {"board": {"type": "grid", "cells": "2D array of cell states", "topology": "square", "dimensions": [9, 9]}, "entities": [{"name": "Player", "properties": {"id": "int", "hints_used": "int", "moves_made": "int", "time_elapsed_ms": "int"}, "initial_state": {"hints_used": 0, "moves_made": 0, "time_elapsed_ms": 0}}, {"name": "Board", "properties": {"cols": "int", "grid": "2D array of digits or empty placeholders", "rows": "int", "empty_cell": "object {row, col} (if applicable)", "goal_state": "9x9 grid representing solution"}, "initial_state": {"grid": []}}, {"name": "Piece", "note": "In Sudoku, cells hold digits 1-9 or empties", "properties": {"id": "int", "col": "int", "row": "int", "type": "string (digit|empty|note)", "value": "int|string", "is_movable": "boolean"}, "initial_state": {}}, {"name": "Game", "properties": {"level": "int", "status": "string (playing|paused|solved|failed)", "move_count": "int", "move_limit": "int|null", "is_solvable": "boolean", "mode_config": "object (stores active mode configuration)", "current_mode": "string (classic)", "move_history": "array of move objects", "hints_remaining": "int", "time_remaining_seconds": "int|null"}, "initial_state": {"level": 1, "status": "playing", "move_count": 0, "current_mode": "classic", "hints_remaining": 3}}]}, "turns": {"type": "turn_based_single_player", "actions": [{"name": "place_digit", "result": "Place a digit (1-9) into the selected cell if valid; updates board, increments move_count, clears conflicting pencil notes if a direct digit is placed, and checks for completion.", "parameters": ["row", "col", "digit"], "preconditions": ["game.status == playing", "a cell is selected", "digit in 1-9", "target cell is empty OR mode allows overwriting", "digit does not create row/column/box conflicts"], "postconditions": ["cell value updated to digit", "move_count incremented by 1", "conflicting notes in same row/column/box may be removed", "win/solved checked"]}, {"name": "pencil_note", "result": "Toggle a pencil note (candidate) in the selected cell; does not affect actual value.", "parameters": ["row", "col", "candidate"], "preconditions": ["game.status == playing", "a cell is selected"], "postconditions": ["note candidate toggled for that cell", "no change to move_count or board final values"]}, {"name": "undo", "result": "Restore previous board state (if available).", "parameters": [], "preconditions": ["move_history.length > 0", "undo_allowed == true"], "postconditions": ["board state rolled back to previous", "move_count decremented accordingly"]}, {"name": "hint", "result": "Reveal a single valid digit for a cell (without solving the puzzle).", "parameters": [], "preconditions": ["game.status == playing", "hints_remaining > 0"], "postconditions": ["hints_remaining decremented by 1", "one cell receives a helpful hint (suggested digit shown as pencil note or temporary highlight)"]}, {"name": "reset", "result": "Reset board to initial puzzle state, clear move history, reset hints.", "parameters": [], "preconditions": ["always"], "postconditions": ["board reset to initial grid", "move_history cleared", "hints_remaining reset to initial value"]}, {"name": "pause", "result": "Pause the game, timer (if any) paused.", "parameters": [], "preconditions": ["game.status == playing"], "postconditions": ["game.status set to paused"]}]}, "config": {"enable_undo": true, "enable_hints": true, "enable_timer": false, "shuffle_algorithm": "solvable_seeded", "default_difficulty": "medium"}, "mechanics": {"undo": {"limit": "unlimited|N moves", "enabled": true, "restores": "Previous board state and move count"}, "hints": {"cost": 1, "type": "next_move|highlight_movable|show_solution_step", "effect": "Reveal helpful information without solving"}, "setup": {"randomization": "Generate a solvable Sudoku puzzle state", "initial_placement": "Load or generate puzzle with a unique solution"}, "movement": {"type": "place_digit|pencil_note", "rules": "Digits placed must not violate Sudoku constraints in their row, column, or 3x3 box", "adjacent_only": "false"}, "goal_detection": {"method": "state_comparison|condition_check", "win_condition": "Board matches target solution grid (all cells filled with 1-9 and no conflicts)"}, "move_validation": {"checks": ["Move is within bounds (row/col in 0..8)", "Target cell accepts the action (empty or allowed overwrite for digits)", "Digit placement does not create row/column/box conflicts", "Pencil notes do not affect final state"], "validation_algorithm": {"name": "rule_check", "steps": ["1. Confirm cell coordinates are valid", "2. If action is place_digit, verify Sudoku constraints are satisfied after placement", "3. If action is pencil_note, ensure candidate is in 1-9", "4. Return validation result"], "inputs": ["row", "col", "action", "board_state"], "outputs": {"reason": "string", "is_valid": "boolean"}}}}, "technical": {"platform": "HTML5 Canvas", "description": "Rendering MUST be implemented with PixiJS on HTML5 Canvas. Use PIXI.Application, PIXI.Container, PIXI.Sprite, PIXI.Graphics, PIXI.Text, and animate with PIXI.Ticker.", "performance": {"target_fps": 60, "max_load_time_ms": 1000}, "render_engine": "PixiJS", "solvability_check": "BFS|DFS|heuristic"}, "acceptance": [{"then": "mode_selection screen is displayed, gameplay screen is NOT visible, no mode is pre-selected", "when": "Game initialization completes", "given": "User opens/loads game for first time"}, {"then": "One mode card (Classic Sudoku) is highlighted with selected styling, Start button becomes enabled", "when": "User selects the Classic Sudoku mode", "given": "mode_selection screen is displayed with 1 mode"}, {"then": "Game transitions to gameplay screen, game initializes with Classic Sudoku mode config, mode_indicator shows 'Mode: Classic Sudoku'", "when": "User clicks Start button", "given": "User has selected Classic Sudoku mode"}, {"then": "Confirmation modal appears with warning message about progress loss", "when": "User clicks Change Mode button", "given": "User is playing game in Classic Sudoku mode"}, {"then": "Modal closes, game continues in current mode, no state is reset", "when": "User clicks Cancel button", "given": "Confirmation modal is displayed"}, {"then": "Game state resets, returns to mode_selection screen, all modes are unselected", "when": "User clicks 'Change Mode' button in modal", "given": "Confirmation modal is displayed"}, {"then": "Game returns to mode_selection screen", "when": "User clicks 'Change Mode' button", "given": "Game Over screen is displayed"}, {"then": "mode_selection screen is displayed FIRST, gameplay screen is NOT visible, no mode is pre-selected", "when": "Game loads", "given": "User opens game for first time"}, {"then": "Start button is disabled, no mode is highlighted", "when": "User has not clicked any mode card", "given": "mode_selection screen is displayed"}, {"then": "Selected mode card is highlighted with selected style, Start button becomes enabled", "when": "User clicks a mode card", "given": "mode_selection screen is displayed"}, {"then": "Game transitions to gameplay screen, initializes with selected mode's config, mode_indicator shows active mode", "when": "User clicks Start button", "given": "User has selected a mode"}, {"then": "Confirmation modal appears with warning about progress loss", "when": "User clicks Change Mode button", "given": "User is playing game in selected mode"}, {"then": "Modal closes, game continues in current mode", "when": "User clicks Cancel button", "given": "Confirmation modal is displayed"}, {"then": "Game state resets, returns to mode_selection screen, all modes are unselected", "when": "User clicks 'Change Mode' button in modal", "given": "Confirmation modal is displayed"}, {"then": "Game returns to mode_selection screen", "when": "User clicks 'Change Mode' button", "given": "Game Over screen is displayed"}, {"then": "A valid move updates the 9x9 grid, move_count increments, and win condition is checked", "when": "Player places a digit", "given": "9x9 Sudoku board with initial puzzle"}, {"then": "game.status = solved, show victory message", "when": "Win condition check occurs", "given": "Board is correctly completed"}, {"then": "move_count updates with each valid move", "when": "Player places digits", "given": "move_count increments accordingly"}, {"then": "Board restored to previous state, move_count decrements", "when": "Undo action executed", "given": "Player requests undo"}], "end_conditions": {"win": [{"priority": "immediate", "condition": "All cells filled with valid digits and no Sudoku conflicts", "check_logic": "board.grid matches solution or satisfies Sudoku completion criteria"}], "draw": [], "lose": []}, "end_conditions_duplication_note": "The end_conditions section intentionally keeps win/lose criteria aligned with Sudoku completion; no AI race end conditions exist in this single-player design.", "generation_mandatory_requirements": ["MUST define at least one mode in available_modes array", "default_mode MUST reference a valid mode identifier from available_modes", "Each mode MUST have: mode (unique id), name, player_mode, players, description", "MUST implement mode_selection screen as FIRST screen shown when game loads", "mode_selection screen is MANDATORY and CANNOT be skipped - no direct access to gameplay", "Each mode card MUST show: name, description, player count, and config summary", "MUST transition to gameplay screen ONLY after mode is selected and Start is clicked", "MUST initialize game with selected mode's configuration from available_modes[selected_index].config", "MUST display current_mode indicator prominently during gameplay", "Changing mode MUST show confirmation modal, then reset game state and return to mode_selection", "MUST implement mode_selection screen as FIRST screen shown to user", "mode_selection screen is MANDATORY and CANNOT be skipped", "mode_selection screen MUST display ALL modes from available_modes array", "MUST show mode icon, name, description, and config for each mode", "Start button MUST be disabled until user selects a mode", "MUST transition to gameplay screen ONLY after mode selected and Start clicked", "MUST initialize game with selected mode's configuration (from available_modes[selected].config)", "MUST display current_mode indicator during gameplay showing active mode name", "MUST provide mode_switcher button accessible during gameplay", "Changing mode MUST show confirmation modal warning about progress loss", "Confirming mode change MUST reset game state and return to mode_selection screen", "Game Over screen MUST provide option to change mode (return to mode_selection)", "MUST set players object to match actual player count for each mode", "MUST define ALL entities listed in state.entities array", "MUST implement ALL actions listed in turns.actions array", "MUST include complete move validation logic", "MUST define clear win/lose conditions in end_conditions", "Core mechanic MUST be accurately described and implemented in mechanics", "Game MUST be fully playable based on specification alone", "All entity properties MUST have initial_state values defined", "default_mode", "player_modes", "common_requirements", "critical_architecture_notes"]}